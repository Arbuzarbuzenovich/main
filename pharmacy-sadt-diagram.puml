@startuml SADT Diagram

skinparam rectangleBackgroundColor White
skinparam rectangleBorderColor Black
skinparam arrowColor Black

title Функциональная диаграмма SADT/IDEF0: Мобильное приложение аптечной сети

' Процесс 1: Поиск лекарств
rectangle "A1\n\nПоиск и выбор\nлекарств" as A1

' Входы слева
"Запрос пользователя\n(название препарата)" as Input1
Input1 -right-> A1

' Управление сверху
"Каталог лекарств\nКлассификация АТХ\nРецептурность" as Control1
Control1 -down-> A1

' Выходы справа
A1 -right-> "Список найденных\nтоваров с наличием\nи ценами" as Output1

' Механизмы снизу
"Мобильное приложение\nAPI-сервер\nБаза данных" as Mech1
Mech1 -up-> A1

note right of A1
  Функция: Поиск товаров
  по запросу пользователя
end note

'-----------------------------------

' Процесс 2: Оформление заказа
rectangle "A2\n\nОформление\nзаказа" as A2

' Входы слева
Output1 -down-> "Выбранные товары\nКоличество" as Input2
Input2 -right-> A2

' Управление сверху
"Правила заказа\nОграничения рецептурности\nМинимальная сумма" as Control2
Control2 -down-> A2

' Выходы справа
A2 -right-> "Созданный заказ\nНомер заказа\nРезерв товаров" as Output2

' Механизмы снизу
"Пользователь\nМобильное приложение\nСистема управления заказами" as Mech2
Mech2 -up-> A2

note right of A2
  Функция: Создание заказа
  с выбором способа получения
end note

'-----------------------------------

' Процесс 3: Обработка платежа
rectangle "A3\n\nОбработка\nплатежа" as A3

' Входы слева
Output2 -down-> "Данные заказа\nСумма к оплате\nСпособ оплаты" as Input3
Input3 -right-> A3

' Управление сверху
"Правила безопасности\nPCI DSS\nТребования ЦБ РФ" as Control3
Control3 -down-> A3

' Выходы справа
A3 -right-> "Подтверждение оплаты\nЧек\nОбновлённый статус" as Output3

' Механизмы снизу
"Платёжный шлюз\nБанк-эквайер\nAPI платёжной системы" as Mech3
Mech3 -up-> A3

note right of A3
  Функция: Проведение
  онлайн-платежа
end note

'-----------------------------------

' Процесс 4: Обработка в аптеке
rectangle "A4\n\nОбработка заказа\nв аптеке" as A4

' Входы слева
Output3 -down-> "Подтверждённый заказ\nСписок товаров\nРецепты (если есть)" as Input4
Input4 -right-> A4

' Управление сверху
"Фармацевтические нормы\nПроверка рецептов (ЕГИСЗ)\nСроки годности" as Control4
Control4 -down-> A4

' Выходы справа
A4 -right-> "Собранный заказ\nПроверенные рецепты\nДокументы" as Output4

' Механизмы снизу
"Фармацевт\nСистема управления аптекой\nСканер штрих-кодов" as Mech4
Mech4 -up-> A4

note right of A4
  Функция: Сборка и проверка
  заказа фармацевтом
end note

'-----------------------------------

' Процесс 5: Выдача/Доставка
rectangle "A5\n\nВыдача или\nдоставка заказа" as A5

' Входы слева
Output4 -down-> "Собранный заказ\nКод выдачи\nАдрес доставки" as Input5
Input5 -right-> A5

' Управление сверху
"Регламент выдачи\nПравила доставки\nСрок хранения заказа" as Control5
Control5 -down-> A5

' Выходы справа
A5 -right-> "Выданный заказ\nПодтверждение получения\nНачисленные бонусы" as Output5

' Механизмы снизу
"Фармацевт / Курьер\nМобильное приложение\nСистема трекинга" as Mech5
Mech5 -up-> A5

note right of A5
  Функция: Передача заказа
  клиенту
end note

'-----------------------------------

' Обратная связь
Output5 -down-> "Обратная связь\nОтзывы, оценки" as Feedback
Feedback -left-> Input1

@enduml