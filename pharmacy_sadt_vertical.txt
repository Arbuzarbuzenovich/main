╔═══════════════════════════════════════════════════════════════════════════════╗
║                    SADT/IDEF0 ДИАГРАММА                                       ║
║            ВЕБ-ПРИЛОЖЕНИЕ ДЛЯ АПТЕЧНОЙ СЕТИ                                   ║
║                  (Вертикальное расположение)                                  ║
╚═══════════════════════════════════════════════════════════════════════════════╝


┌────────────────────────────────────────────────┐
│ I: Данные пользователя, учетные записи         │
│ C: Политика безопасности, правила доступа      │         ┌──────────────────┐
│ O: Аутентифицированный пользователь, токен     │────────►│   АВТОРИЗАЦИЯ    │
│ M: Сервер аутентификации, БД пользователей    │         │   ПОЛЬЗОВАТЕЛЯ   │
└────────────────────────────────────────────────┘         └──────────────────┘
                                                                     │
                                                                     ▼
┌────────────────────────────────────────────────┐
│ I: Запрос пользователя, фильтры поиска        │
│ C: Каталог препаратов, ограничения продаж     │         ┌──────────────────┐
│ O: Список найденных препаратов, наличие       │────────►│   ПОИСК И ВЫБОР  │
│ M: База данных препаратов, поисковая система  │         │     ЛЕКАРСТВ     │
└────────────────────────────────────────────────┘         └──────────────────┘
                                                                     │
                                                                     ▼
┌────────────────────────────────────────────────┐
│ I: Скан/фото рецепта, данные врача            │
│ C: Стандарты электронных рецептов, сроки      │         ┌──────────────────┐
│ O: Валидированный рецепт, статус проверки     │────────►│   УПРАВЛЕНИЕ     │
│ M: Система OCR, база данных рецептов          │         │    РЕЦЕПТАМИ     │
└────────────────────────────────────────────────┘         └──────────────────┘
                                                                     │
                                                                     ▼
┌────────────────────────────────────────────────┐
│ I: Корзина товаров, адрес, способ оплаты      │
│ C: Правила доставки, минимальная сумма заказа │         ┌──────────────────┐
│ O: Подтвержденный заказ, номер заказа, чек    │────────►│   ОФОРМЛЕНИЕ     │
│ M: Система управления заказами, платежный шлюз│         │     ЗАКАЗА       │
└────────────────────────────────────────────────┘         └──────────────────┘
                                                                     │
                                                                     ▼
┌────────────────────────────────────────────────┐
│ I: История покупок, текущий заказ, симптомы    │
│ C: Алгоритмы рекомендаций, правила            │         ┌──────────────────┐
│ O: Персональные рекомендации, аналоги         │────────►│     СИСТЕМА      │
│ M: ML-модель, аналитическая платформа         │         │   РЕКОМЕНДАЦИЙ   │
└────────────────────────────────────────────────┘         └──────────────────┘
                                                                     │
                                                                     ▼
┌────────────────────────────────────────────────┐
│ I: Действия клиента (клики, ввод, навигация)  │
│ C: UX/UI стандарты, требования доступности    │         ┌──────────────────┐
│ O: Визуализация данных, уведомления          │────────►│ ПОЛЬЗОВАТЕЛЬСКИЙ │
│ M: Веб/мобильное приложение (React, Flutter)  │         │   ИНТЕРФЕЙС      │
└────────────────────────────────────────────────┘         └──────────────────┘


═══════════════════════════════════════════════════════════════════════════════
МЕТОДОЛОГИЯ ICOM
═══════════════════════════════════════════════════════════════════════════════

I (Input)     → Входные данные, которые преобразуются в процессе
C (Control)   → Управление: правила, стандарты, ограничения
O (Output)    → Выходные данные — результаты процесса
M (Mechanism) → Механизмы: ресурсы, инструменты для выполнения


═══════════════════════════════════════════════════════════════════════════════
ДЕТАЛЬНОЕ ОПИСАНИЕ БЛОКОВ
═══════════════════════════════════════════════════════════════════════════════

[1] АВТОРИЗАЦИЯ ПОЛЬЗОВАТЕЛЯ
    ├─ Input: Логин, пароль, биометрия
    ├─ Control: Политика безопасности, стандарты GDPR
    ├─ Output: JWT токен, профиль пользователя
    └─ Mechanism: OAuth 2.0, PostgreSQL, Redis

[2] ПОИСК И ВЫБОР ЛЕКАРСТВ
    ├─ Input: Название препарата, фильтры, геолокация
    ├─ Control: Каталог препаратов, возрастные ограничения
    ├─ Output: Список препаратов, цены, наличие
    └─ Mechanism: Elasticsearch, PostgreSQL, API аптек

[3] УПРАВЛЕНИЕ РЕЦЕПТАМИ
    ├─ Input: Скан рецепта, номер е-рецепта
    ├─ Control: Приказы Минздрава, сроки действия
    ├─ Output: Валидированный рецепт, список назначений
    └─ Mechanism: OCR (Tesseract), ЕГИСЗ API, ML-модель

[4] ОФОРМЛЕНИЕ ЗАКАЗА
    ├─ Input: Корзина, адрес доставки, промокод
    ├─ Control: Минимальная сумма, зоны доставки
    ├─ Output: Номер заказа, чек, трек-номер
    └─ Mechanism: OMS, ЮKassa, логистика, CRM

[5] СИСТЕМА РЕКОМЕНДАЦИЙ
    ├─ Input: История покупок, текущий заказ
    ├─ Control: Алгоритмы ML, правила совместимости
    ├─ Output: Рекомендации, аналоги, предупреждения
    └─ Mechanism: Collaborative Filtering, Apache Spark

[6] ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
    ├─ Input: Клики, свайпы, голосовой ввод
    ├─ Control: WCAG 2.1, Material Design, брендбук
    ├─ Output: Визуализация, push-уведомления
    └─ Mechanism: React, Flutter, Material UI, CDN


═══════════════════════════════════════════════════════════════════════════════
ПОСЛЕДОВАТЕЛЬНОСТЬ РАБОТЫ СИСТЕМЫ
═══════════════════════════════════════════════════════════════════════════════

1. Пользователь проходит АВТОРИЗАЦИЮ
   │
   ├─► Получает токен доступа
   │
2. Выполняет ПОИСК ЛЕКАРСТВ
   │
   ├─► Находит нужные препараты
   │
3. При необходимости загружает РЕЦЕПТ
   │
   ├─► Система валидирует рецепт
   │
4. ОФОРМЛЯЕТ ЗАКАЗ
   │
   ├─► Выбирает способ получения и оплачивает
   │
5. Получает РЕКОМЕНДАЦИИ
   │
   ├─► Система предлагает аналоги и сопутствующие товары
   │
6. Все взаимодействие происходит через ИНТЕРФЕЙС
   │
   └─► Удобное веб/мобильное приложение


═══════════════════════════════════════════════════════════════════════════════
ПРЕИМУЩЕСТВА АРХИТЕКТУРЫ
═══════════════════════════════════════════════════════════════════════════════

✓ Модульность — каждый блок независим
✓ Масштабируемость — легко добавлять новые функции
✓ Безопасность — многоуровневая защита данных
✓ Соответствие законодательству — ЕГИСЗ, 152-ФЗ
✓ Персонализация — ML-рекомендации
✓ Удобство — современный UI/UX
