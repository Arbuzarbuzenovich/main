graph TD
    subgraph "БЛОК 1: Авторизация пользователя"
        A1[АВТОРИЗАЦИЯ ПОЛЬЗОВАТЕЛЯ]
        A1_I["I: Данные пользователя<br/>(логин, пароль)"]
        A1_C["C: Политика безопасности,<br/>правила доступа"]
        A1_O["O: Аутентифицированный<br/>пользователь, токен доступа"]
        A1_M["M: Сервер аутентификации,<br/>база данных пользователей"]
        
        A1_I -->|Вход| A1
        A1_C -->|Управление| A1
        A1 -->|Выход| A1_O
        A1_M -.->|Механизм| A1
    end
    
    subgraph "БЛОК 2: Поиск и выбор лекарств"
        B1[ПОИСК И ВЫБОР ЛЕКАРСТВ]
        B1_I["I: Запрос пользователя,<br/>фильтры поиска, рецепт"]
        B1_C["C: Каталог препаратов,<br/>ограничения продаж"]
        B1_O["O: Список найденных препаратов,<br/>наличие в аптеках"]
        B1_M["M: База данных препаратов,<br/>поисковая система"]
        
        B1_I -->|Вход| B1
        B1_C -->|Управление| B1
        B1 -->|Выход| B1_O
        B1_M -.->|Механизм| B1
    end
    
    subgraph "БЛОК 3: Управление рецептами"
        C1[УПРАВЛЕНИЕ РЕЦЕПТАМИ]
        C1_I["I: Скан/фото рецепта,<br/>данные врача и пациента"]
        C1_C["C: Стандарты электронных рецептов,<br/>сроки действия"]
        C1_O["O: Валидированный рецепт,<br/>статус проверки"]
        C1_M["M: Система OCR,<br/>база данных рецептов"]
        
        C1_I -->|Вход| C1
        C1_C -->|Управление| C1
        C1 -->|Выход| C1_O
        C1_M -.->|Механизм| C1
    end
    
    subgraph "БЛОК 4: Оформление заказа"
        D1[ОФОРМЛЕНИЕ ЗАКАЗА]
        D1_I["I: Корзина товаров, адрес доставки,<br/>способ оплаты"]
        D1_C["C: Правила доставки,<br/>минимальная сумма заказа"]
        D1_O["O: Подтвержденный заказ,<br/>номер заказа, чек"]
        D1_M["M: Система управления заказами,<br/>платежный шлюз"]
        
        D1_I -->|Вход| D1
        D1_C -->|Управление| D1
        D1 -->|Выход| D1_O
        D1_M -.->|Механизм| D1
    end
    
    subgraph "БЛОК 5: Система рекомендаций"
        E1[СИСТЕМА РЕКОМЕНДАЦИЙ]
        E1_I["I: История покупок,<br/>текущий заказ, симптомы"]
        E1_C["C: Алгоритмы рекомендаций,<br/>правила совместимости"]
        E1_O["O: Персональные рекомендации,<br/>аналоги препаратов"]
        E1_M["M: ML-модель,<br/>аналитическая платформа"]
        
        E1_I -->|Вход| E1
        E1_C -->|Управление| E1
        E1 -->|Выход| E1_O
        E1_M -.->|Механизм| E1
    end
    
    subgraph "БЛОК 6: Пользовательский интерфейс"
        F1[ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС]
        F1_I["I: Действия пользователя<br/>(клики, ввод, навигация)"]
        F1_C["C: UX/UI стандарты,<br/>требования доступности"]
        F1_O["O: Визуализация данных,<br/>уведомления, обратная связь"]
        F1_M["M: Веб/мобильное приложение<br/>(React, Flutter)"]
        
        F1_I -->|Вход| F1
        F1_C -->|Управление| F1
        F1 -->|Выход| F1_O
        F1_M -.->|Механизм| F1
    end
    
    %% Связи между блоками
    A1_O ==> B1_I
    B1_O ==> C1_I
    C1_O ==> D1_I
    D1_O ==> E1_I
    E1_O ==> F1_I
    F1_O ==> B1_I
    
    classDef inputStyle fill:#E3F2FD,stroke:#2196F3,stroke-width:2px
    classDef controlStyle fill:#FFEBEE,stroke:#F44336,stroke-width:2px
    classDef outputStyle fill:#E8F5E9,stroke:#4CAF50,stroke-width:2px
    classDef mechanismStyle fill:#FFF3E0,stroke:#FF9800,stroke-width:2px
    classDef processStyle fill:#F5F5F5,stroke:#607D8B,stroke-width:3px
    
    class A1_I,B1_I,C1_I,D1_I,E1_I,F1_I inputStyle
    class A1_C,B1_C,C1_C,D1_C,E1_C,F1_C controlStyle
    class A1_O,B1_O,C1_O,D1_O,E1_O,F1_O outputStyle
    class A1_M,B1_M,C1_M,D1_M,E1_M,F1_M mechanismStyle
    class A1,B1,C1,D1,E1,F1 processStyle
