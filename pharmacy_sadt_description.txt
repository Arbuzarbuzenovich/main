╔═══════════════════════════════════════════════════════════════════════════════╗
║                    SADT/IDEF0 ДИАГРАММА                                       ║
║            ВЕБ-ПРИЛОЖЕНИЕ ДЛЯ АПТЕЧНОЙ СЕТИ                                   ║
╚═══════════════════════════════════════════════════════════════════════════════╝

═══════════════════════════════════════════════════════════════════════════════
МЕТОДОЛОГИЯ SADT (Structured Analysis and Design Technique)
═══════════════════════════════════════════════════════════════════════════════

Модель ICOM:
  I (Input)     - Входные данные (слева)
  C (Control)   - Управление (сверху)
  O (Output)    - Выходные данные (справа)
  M (Mechanism) - Механизмы (снизу)


═══════════════════════════════════════════════════════════════════════════════
БЛОК 1: АВТОРИЗАЦИЯ ПОЛЬЗОВАТЕЛЯ
═══════════════════════════════════════════════════════════════════════════════

                        C: Политика безопасности,
                           правила доступа
                                  │
                                  ▼
    I: Данные              ┌─────────────────┐         O: Аутентифицированный
    пользователя      ────►│   АВТОРИЗАЦИЯ   │────►       пользователь,
    (логин, пароль)        │   ПОЛЬЗОВАТЕЛЯ  │            токен доступа
                           └─────────────────┘
                                  ▲
                                  │
                        M: Сервер аутентификации,
                           база данных пользователей


═══════════════════════════════════════════════════════════════════════════════
БЛОК 2: ПОИСК И ВЫБОР ЛЕКАРСТВ
═══════════════════════════════════════════════════════════════════════════════

                        C: Каталог препаратов,
                           ограничения продаж
                                  │
                                  ▼
    I: Запрос              ┌─────────────────┐         O: Список найденных
    пользователя,     ────►│   ПОИСК И ВЫБОР │────►       препаратов,
    фильтры поиска,        │     ЛЕКАРСТВ    │            наличие в аптеках
    рецепт                 └─────────────────┘
                                  ▲
                                  │
                        M: База данных препаратов,
                           поисковая система


═══════════════════════════════════════════════════════════════════════════════
БЛОК 3: УПРАВЛЕНИЕ РЕЦЕПТАМИ
═══════════════════════════════════════════════════════════════════════════════

                        C: Стандарты электронных
                           рецептов, сроки действия
                                  │
                                  ▼
    I: Скан/фото           ┌─────────────────┐         O: Валидированный
    рецепта, данные   ────►│   УПРАВЛЕНИЕ    │────►       рецепт,
    врача и пациента       │    РЕЦЕПТАМИ    │            статус проверки
                           └─────────────────┘
                                  ▲
                                  │
                        M: Система OCR,
                           база данных рецептов


═══════════════════════════════════════════════════════════════════════════════
БЛОК 4: ОФОРМЛЕНИЕ ЗАКАЗА
═══════════════════════════════════════════════════════════════════════════════

                        C: Правила доставки,
                           минимальная сумма заказа
                                  │
                                  ▼
    I: Корзина             ┌─────────────────┐         O: Подтвержденный
    товаров, адрес    ────►│   ОФОРМЛЕНИЕ    │────►       заказ, номер
    доставки, способ       │     ЗАКАЗА      │            заказа, чек
    оплаты                 └─────────────────┘
                                  ▲
                                  │
                        M: Система управления заказами,
                           платежный шлюз


═══════════════════════════════════════════════════════════════════════════════
БЛОК 5: СИСТЕМА РЕКОМЕНДАЦИЙ
═══════════════════════════════════════════════════════════════════════════════

                        C: Алгоритмы рекомендаций,
                           правила совместимости
                                  │
                                  ▼
    I: История             ┌─────────────────┐         O: Персональные
    покупок, текущий  ────►│     СИСТЕМА     │────►       рекомендации,
    заказ, симптомы        │   РЕКОМЕНДАЦИЙ  │            аналоги препаратов
                           └─────────────────┘
                                  ▲
                                  │
                        M: ML-модель,
                           аналитическая платформа


═══════════════════════════════════════════════════════════════════════════════
БЛОК 6: ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
═══════════════════════════════════════════════════════════════════════════════

                        C: UX/UI стандарты,
                           требования доступности
                                  │
                                  ▼
    I: Действия            ┌─────────────────┐         O: Визуализация
    пользователя      ────►│ ПОЛЬЗОВАТЕЛЬСКИЙ│────►       данных, уведомления,
    (клики, ввод,          │    ИНТЕРФЕЙС    │            обратная связь
    навигация)             └─────────────────┘
                                  ▲
                                  │
                        M: Веб/мобильное приложение
                           (React, Flutter)


═══════════════════════════════════════════════════════════════════════════════
ВЗАИМОСВЯЗИ МЕЖДУ БЛОКАМИ
═══════════════════════════════════════════════════════════════════════════════

[1] АВТОРИЗАЦИЯ
       │
       ├──► Токен доступа передается во все последующие блоки
       │
       ▼
[2] ПОИСК И ВЫБОР ЛЕКАРСТВ
       │
       ├──► Выбранные препараты ──► [4] ОФОРМЛЕНИЕ ЗАКАЗА
       │
       ├──► Рецептурные препараты ──► [3] УПРАВЛЕНИЕ РЕЦЕПТАМИ
       │
       ▼
[3] УПРАВЛЕНИЕ РЕЦЕПТАМИ
       │
       ├──► Валидированные рецепты ──► [4] ОФОРМЛЕНИЕ ЗАКАЗА
       │
       ▼
[4] ОФОРМЛЕНИЕ ЗАКАЗА
       │
       ├──► Данные о заказе ──► [5] СИСТЕМА РЕКОМЕНДАЦИЙ
       │
       ▼
[5] СИСТЕМА РЕКОМЕНДАЦИЙ
       │
       ├──► Рекомендации ──► [6] ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
       │
       ▼
[6] ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
       │
       └──► Обратная связь пользователя ──► [2] ПОИСК И ВЫБОР ЛЕКАРСТВ


═══════════════════════════════════════════════════════════════════════════════
ДЕТАЛЬНОЕ ОПИСАНИЕ КОМПОНЕНТОВ
═══════════════════════════════════════════════════════════════════════════════

БЛОК 1 - АВТОРИЗАЦИЯ ПОЛЬЗОВАТЕЛЯ
----------------------------------
Назначение: Обеспечение безопасного доступа к системе

Input (Входные данные):
  • Логин пользователя
  • Пароль
  • Биометрические данные (опционально)
  • IP-адрес и устройство

Control (Управление):
  • Политика безопасности организации
  • Правила доступа к данным
  • Стандарты GDPR/152-ФЗ
  • Требования двухфакторной аутентификации

Output (Выходные данные):
  • JWT токен доступа
  • Профиль пользователя
  • Права доступа
  • История входов

Mechanism (Механизмы):
  • OAuth 2.0 / OpenID Connect
  • Сервер аутентификации (Keycloak, Auth0)
  • База данных пользователей (PostgreSQL)
  • Redis для хранения сессий


БЛОК 2 - ПОИСК И ВЫБОР ЛЕКАРСТВ
--------------------------------
Назначение: Поиск и отображение информации о препаратах

Input (Входные данные):
  • Поисковый запрос (название, симптомы, действующее вещество)
  • Фильтры (форма выпуска, производитель, цена)
  • Рецепт (для рецептурных препаратов)
  • Геолокация пользователя

Control (Управление):
  • Каталог лекарственных препаратов
  • Ограничения на продажу рецептурных препаратов
  • Правила возрастных ограничений
  • Регуляторные требования Минздрава

Output (Выходные данные):
  • Список найденных препаратов
  • Информация о наличии в аптеках
  • Цены и аналоги
  • Инструкция по применению
  • Противопоказания

Mechanism (Механизмы):
  • Elasticsearch для полнотекстового поиска
  • База данных препаратов (PostgreSQL)
  • API интеграции с аптеками
  • Кэш Redis для быстрого доступа


БЛОК 3 - УПРАВЛЕНИЕ РЕЦЕПТАМИ
------------------------------
Назначение: Обработка и валидация электронных рецептов

Input (Входные данные):
  • Скан или фото рецепта
  • Номер электронного рецепта
  • Данные врача (ФИО, лицензия)
  • Данные пациента (ФИО, дата рождения)

Control (Управление):
  • Стандарты электронных рецептов (Приказ Минздрава)
  • Сроки действия рецептов
  • Правила выписки контролируемых препаратов
  • Лимиты на количество отпусков

Output (Выходные данные):
  • Статус валидации рецепта
  • Распознанные данные рецепта
  • Список назначенных препаратов
  • История использования рецепта

Mechanism (Механизмы):
  • OCR система (Tesseract, Google Vision API)
  • База данных рецептов
  • Интеграция с ЕГИСЗ (Единая государственная информационная система в здравоохранении)
  • ML-модель для распознавания рецептов


БЛОК 4 - ОФОРМЛЕНИЕ ЗАКАЗА
---------------------------
Назначение: Создание и обработка заказов на лекарства

Input (Входные данные):
  • Корзина с товарами
  • Адрес доставки
  • Выбранная аптека (для самовывоза)
  • Способ оплаты
  • Промокоды и скидки

Control (Управление):
  • Правила доставки (зоны, время, стоимость)
  • Минимальная сумма заказа
  • Правила применения скидок
  • Лимиты на количество препаратов

Output (Выходные данные):
  • Подтвержденный заказ
  • Уникальный номер заказа
  • Электронный чек
  • Трек-номер доставки
  • SMS/Email уведомления

Mechanism (Механизмы):
  • Система управления заказами (Order Management System)
  • Платежный шлюз (Сбербанк, ЮKassa)
  • Логистическая система
  • CRM система


БЛОК 5 - СИСТЕМА РЕКОМЕНДАЦИЙ
------------------------------
Назначение: Генерация персональных рекомендаций

Input (Входные данные):
  • История покупок пользователя
  • Текущий заказ
  • Симптомы или жалобы
  • Хронические заболевания (из профиля)

Control (Управление):
  • Алгоритмы коллаборативной фильтрации
  • Правила совместимости препаратов
  • Ограничения по взаимодействию лекарств
  • Возрастные и медицинские противопоказания

Output (Выходные данные):
  • Персональные рекомендации препаратов
  • Аналоги (дженерики)
  • Сопутствующие товары
  • Предупреждения о несовместимости

Mechanism (Механизмы):
  • ML-модель (Collaborative Filtering, Content-Based)
  • Аналитическая платформа (Apache Spark)
  • База знаний о препаратах
  • A/B тестирование рекомендаций


БЛОК 6 - ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
------------------------------------
Назначение: Обеспечение взаимодействия с пользователем

Input (Входные данные):
  • Действия пользователя (клики, свайпы, ввод текста)
  • Навигация между страницами
  • Голосовой ввод
  • Жесты (для мобильных устройств)

Control (Управление):
  • UX/UI стандарты и гайдлайны
  • Требования доступности (WCAG 2.1)
  • Брендбук компании
  • Responsive дизайн правила

Output (Выходные данные):
  • Визуализация данных
  • Push/SMS/Email уведомления
  • Обратная связь (тактильная, звуковая)
  • Аналитические события

Mechanism (Механизмы):
  • Frontend фреймворк (React, Vue.js)
  • Мобильное приложение (Flutter, React Native)
  • UI библиотека компонентов (Material UI, Ant Design)
  • CDN для быстрой загрузки ресурсов


═══════════════════════════════════════════════════════════════════════════════
ПРЕИМУЩЕСТВА СИСТЕМЫ
═══════════════════════════════════════════════════════════════════════════════

✓ Безопасность: Надежная аутентификация и защита данных
✓ Удобство: Быстрый поиск препаратов и простое оформление заказа
✓ Законность: Валидация рецептов и соблюдение законодательства
✓ Персонализация: Рекомендации на основе истории и предпочтений
✓ Доступность: Мультиплатформенность (Web + Mobile)
✓ Эффективность: Оптимизация процессов закупки лекарств

═══════════════════════════════════════════════════════════════════════════════
