@startuml Pharmacy Database Schema

skinparam rectangleBackgroundColor White
skinparam rectangleBorderColor Black
skinparam databaseBackgroundColor White
skinparam databaseBorderColor Black

title Структура базы данных мобильного приложения аптечной сети

rectangle "Пользователи\n\n• ID пользователя\n• ФИО\n• Контактные данные\n• Хэшированный пароль\n• Баланс бонусов\n• Язык интерфейса" as users

rectangle "Товары\n\n• ID товара\n• Наименование\n• Описание\n• Цена\n• Категория\n• Рецептурный товар\n• Производитель" as products

rectangle "Аптеки\n\n• ID аптеки\n• Адрес\n• Координаты (широта, долгота)\n• Контактный телефон" as pharmacies

rectangle "Наличие\n\n• ID товара\n• ID аптеки\n• Количество" as stock

rectangle "Заказы\n\n• ID заказа\n• ID пользователя\n• Статус\n• Способ получения\n• Адрес доставки\n• ID аптеки\n• Дата создания\n• Общая сумма" as orders

rectangle "Состав заказа\n\n• ID заказа\n• ID товара\n• Количество\n• Цена на момент заказа" as orderItems

rectangle "Уведомления\n\n• ID уведомления\n• ID пользователя\n• Тип уведомления\n• Текст сообщения\n• Признак прочтения" as notifications

database "База данных\nPostgreSQL / MySQL" as db

users --> orders : "Оформляет заказы"
users --> notifications : "Получает уведомления"

orders --> orderItems : "Содержит товары"
orders --> pharmacies : "Самовывоз из аптеки"

products --> orderItems : "Позиции в заказах"
products --> stock : "Хранится в аптеках"

pharmacies --> stock : "Наличие товаров"

users --> db : "Данные пользователей"
products --> db : "Каталог товаров"
pharmacies --> db : "Данные аптек"
stock --> db : "Остатки"
orders --> db : "История заказов"
orderItems --> db : "Детализация заказов"
notifications --> db : "Push-уведомления"

@enduml
